---
title: 完全Jekyll化
---

## 起因

图片不能点击放大!

搜索资料发现, 只能通过 `Jekyll` 插件来实现, 这样的话只能抛弃原有 `Gitbook` 模板了 (っ °Д °;)っ

## 重新构建

新方案采用 `Jekyll` + `Plugins` + `Github Action` 来进行网站的部署

## 本地部署

`Jekyll` 的安装过程见上一篇文章`在本地测试个人网站`

### 创建

```sh
jekyll new newBlog
---
New jekyll site installed in E:/Codes/blog
```

### 部署

```sh
jekyll serve
---
jekyll-4.2.2/lib/jekyll/commands/serve/servlet.rb:3:in `require': cannot load such file -- webrick (LoadError)
```

emm...? 搜索了一下, 原来 `Ruby` 在 `3.0` 以后不再附带 `webrick` 了

#### 添加 `webrick`

```sh
bundle add webrick
```

```sh
jekyll serve
---
Server address: http://127.0.0.1:4000/
```

这下正常了, 访问 <http://127.0.0.1:4000/> 查看页面效果
![InitalJekyll](/assets/InitalJekyll.png)

### Cleanup

```sh
tree \f
---
blog
├─assets
├─img
├─_includes
├─_layouts
├─_sass
│  .gitignore
│  404.html
│  Gemfile
│  Gemfile.lock
│  Index.md
│  _config.yml
```

清理无用的文件

`_config.yml`

```yml
# Site settings
title: 明理
author: Windmill-City
email: 1449182174@qq.com
description: >-
  简单的规则构造复杂的系统
baseurl: ""
url: "https://windmill-city.github.io/"
```

`Index.md`

```md
---
layout: home
title: 主页
permalink: /
---

>简单的规则构造出复杂的系统

```

`Gemfile`

```gem
source "https://rubygems.org"
gem "jekyll", "~> 4.2.2"
group :jekyll_plugins do
end

# Windows and JRuby does not include zoneinfo files, so bundle the tzinfo-data gem
# and associated library.
platforms :mingw, :x64_mingw, :mswin, :jruby do
  gem "tzinfo", "~> 1.2"
  gem "tzinfo-data"
end

# Performance-booster for watching directories on Windows
gem "wdm", "~> 0.1.1", :platforms => [:mingw, :x64_mingw, :mswin]

# Lock `http_parser.rb` gem to `v0.6.x` on JRuby builds since newer versions of the gem
# do not have a Java counterpart.
gem "http_parser.rb", "~> 0.6.0", :platforms => [:jruby]

# Webserver library
gem "webrick", "~> 1.7"
```

#### 再次查看效果

```sh
jekyll serve
---
Server address: http://127.0.0.1:4000/
```

![PageAfterCleanup](/assets/PageAfterCleanup.png)

正确显示啦！接下来就是以此为基线进行 `Gitbook` 页面的制作了

## 页面制作

| 页面构成 |          |
| :------: | :------: |
| **目录** | **文章** |
|   搜索   |   标题   |
|   目录   | Metadata |
| 页面导航 |   内容   |

先进行 `文章` 部分的制作

`home.html`

```html
<!DOCTYPE html>
<html>

<head>
    <title>{{ page.title }}·{{ site.title }}</title>
</head>

<body>
    <div class="page">
        <!--Title-->
        <h1>{{ page. title }}</h1>
        <!--Metadata-->
        <header class="meta">
            <ul>
                <!--Author-->
                <li class="author">
                    {{ page.author | default: site.author }}
                </li>
                <!--Date-->
                {% if page.date %}
                <li class="date">
                    {{ page.date | date: "%Y-%m-%d" }}
                </li>
                {% endif %}
                <!--Categories-->
                <ul class="categories">
                    {% for category in page.categories %}
                    <li>
                        {{ category }}
                    </li>
                    {% endfor %}
                </ul>
            </ul>
        </header>
        <hr>
        <!--Markdown Content-->
        <section class="content">
            {{ page.content }}
        </section>
    </div>
</body>

</html>
```

![homeNoCss](/assets/homeNoCss.png)

嗯! 页面的主体结构出来了, 接下来为它附加 `CSS` 效果
